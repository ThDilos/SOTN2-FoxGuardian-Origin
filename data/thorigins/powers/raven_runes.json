{
	"type": "origins:multiple",
	"hidden": true,

	"rune_id": {
		"type": "origins:resource",
		"min": 0,
		"max": 2,
		"start_value": 0,
		"min_action": {
			"type": "origins:execute_command",
			"command": "/playsound minecraft:block.beacon.deactivate player @s ~ ~ ~ 0.5 2"
		}
	},

	"glide_duration": {
		"type": "origins:resource",
		"min": 0,
		"max": 240
	},

	"gliding": {
		"type": "origins:resource",
		"min": 0,
		"max": 1,
		"max_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:add_velocity",
					"y": 0.2
				},
				{
					"type": "origins:execute_command",
					"command": "/execute summon chicken run tag @s add thinking"
				},
				{
					"type": "origins:area_of_effect",
					"radius": 1,
					"bientity_condition": {
						"type": "origins:target_condition",
						"condition": {
							"type": "origins:nbt",
							"nbt": "{Tags:[\"thinking\"]}"
						}
					},
					"bientity_action": {
						"type": "origins:and",
						"actions": [
							{
								"type": "origins:invert",
								"action": {
									"type": "origins:mount"
								}
							},
							{
								"type": "origins:target_action",
								"action": {
									"type": "origins:and",
									"actions": [
										{
											"type": "origins:execute_command",
											"command": "/data merge entity @s {CustomName:'[{\"text\":\"Thought?\",\"color\":\"dark_purple\",\"bold\":true}]',CustomNameVisible:1b,Invulnerable:1b}"
										},
										{
											"type": "origins:execute_command",
											"command": "/scale easing set pehkui:hitbox_height pehkui:exponential_out @s"
										},
										{
											"type": "origins:execute_command",
											"command": "/scale multiply pehkui:hitbox_height 0.316 @s"
										},
										{
											"type": "origins:execute_command",
											"command": "/tag @s remove thinking"
										},
										{
											"type": "origins:execute_command",
											"command": "/tag @s add thought"
										},
										{
											"type": "origins:play_sound",
											"sound": "minecraft:entity.puffer_fish.blow_up",
											"volume": 0.5,
											"pitch": 1.8,
											"category": "neutral"
										}
									]
								}
							}
						]
					}
				}
			]
		},
		"min_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:set_fall_distance",
					"fall_distance": 0
				},
				{
					"type": "origins:passenger_action",
					"action": {
						"type": "origins:and",
						"actions": [
							{
								"type": "origins:spawn_particles",
								"particle": "minecraft:cloud",
								"count": 10,
								"offset_y": 0.1,
								"spread": {
									"x": 0.2,
									"y": 0.1,
									"z": 0.2
								},
								"speed": 0.01,
								"force": false
							},
							{
								"type": "origins:play_sound",
								"sound": "minecraft:entity.puffer_fish.blow_out",
								"volume": 0.5,
								"pitch": 1.8,
								"category": "neutral"
							},
							{
								"type": "origins:dismount"
							},
							{
								"type": "origins:execute_command",
								"command": "/data modify entity @s CustomName set value \"\""
							},
							{
								"type": "origins:execute_command",
								"command": "/execute positioned ~ -100 ~ summon chicken run tag @s add grave"
							},
							{
								"type": "origins:execute_command",
								"command": "/ride @s mount @e[tag=grave,limit=1,sort=nearest]"
							},
							{
								"type": "origins:riding_action",
								"action": {
									"type": "origins:delay",
									"ticks": 2,
									"action": {
										"type": "origins:and",
										"actions": [
											{
												"type": "origins:passenger_action",
												"action": {
													"type": "origins:execute_command",
													"command": "/kill @s"
												}
											},
											{
												"type": "origins:execute_command",
												"command": "/kill @s"
											}
										]
									}
								}
							}
						]
					}
				}
			]
		}
	},

	"ticks": {
		"type": "origins:action_over_time",
		"interval": 1,
		"entity_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:if_else",
					"condition": {
						"type": "origins:resource",
						"resource": "*:*_pressing",
						"compare_to": 0,
						"comparison": "=="
					},
					"if_action": {
						"type": "origins:change_resource",
						"resource": "*:*_temp_locked",
						"change": -1
					}
				},
				{
					"type": "origins:selector_action",
					"selector": "@e[tag=thought]",
					"bientity_condition": {
						"type": "origins:target_condition",
						"condition": {
							"type": "origins:riding",
							"inverted": true
						}
					},
					"bientity_action": {
						"type": "origins:target_action",
						"action": {
							"type": "origins:and",
							"actions": [
								{
									"type": "origins:execute_command",
									"command": "/tp ~ -100 ~"
								},
								{
									"type": "origins:execute_command",
									"command": "/kill @s "
								}
							]
						}
					}
				},
				{
					"type": "origins:if_else",
					"condition": {
						"type": "origins:resource",
						"resource": "*:*_gliding",
						"compare_to": 1,
						"comparison": "=="
					},
					"if_action": {
						"type": "origins:if_else",
						"condition": {
							"type": "origins:resource",
							"resource": "*:*_glide_duration",
							"compare_to": 0,
							"comparison": "=="
						},
						"if_action": {
							"type": "origins:change_resource",
							"resource": "*:*_gliding",
							"change": -1
						},
						"else_action": {
							"type": "origins:and",
							"actions": [
								{
									"type": "origins:change_resource",
									"resource": "*:*_glide_duration",
									"change": -1
								},
								{
									"type": "origins:if_else",
									"condition": {
										"type": "origins:or",
										"conditions": [
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 10,
												"comparison": "=="
											},
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 20,
												"comparison": "=="
											},
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 30,
												"comparison": "=="
											},
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 40,
												"comparison": "=="
											},
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 50,
												"comparison": "=="
											},
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 60,
												"comparison": "=="
											},
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 70,
												"comparison": "=="
											},
											{
												"type": "origins:resource",
												"resource": "*:*_glide_duration",
												"compare_to": 80,
												"comparison": "=="
											}
										]
									},
									"if_action": {
										"type": "origins:play_sound",
										"category": "neutral",
										"sound": "minecraft:entity.chicken.hurt",
										"volume": 0.8,
										"pitch": 1.2
									}
								}
							]
						}
					}
				},
				{
					"type": "origins:if_else",
					"condition": {
						"type": "origins:or",
						"conditions": [
							{
								"type": "origins:on_block"
							},
							{
								"type": "origins:resource",
								"resource": "*:*_pressing",
								"compare_to": 0,
								"comparison": "=="
							}
						]
					},
					"if_action": {
						"type": "origins:change_resource",
						"resource": "*:*_gliding",
						"change": -1
					}
				},
				{
					"type": "origins:if_else",
					"condition": {
						"type": "origins:on_block"
					},
					"if_action": {
						"type": "origins:and",
						"actions": [
							{
								"type": "origins:change_resource",
								"resource": "*:*_glide_duration",
								"change": 240
							},
							{
								"type": "origins:change_resource",
								"resource": "*:*_temp_locked",
								"change": -1
							},
							{
								"type": "origins:change_resource",
								"resource": "*:*_uplifted",
								"change": -1
							}
						]
					}
				}
			]
		}
	},

	"temp_locked": {
		"type": "origins:resource",
		"min": 0,
		"max": 1
	},

	"pressing": {
		"type": "origins:cooldown",
		"cooldown": 3
	},

	"check_pressing": {
		"type": "origins:active_self",
		"key": {
			"key": "key.jump",
			"continuous": true
		},
		"entity_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:trigger_cooldown",
					"power": "*:*_pressing"
				},
				{
					"type": "origins:if_else",
					"condition": {
						"type": "origins:and",
						"conditions": [
							{
								"type": "origins:block_collision",
								"offset_y": -0.3,
								"inverted": true
							},
							{
								"type": "origins:resource",
								"resource": "*:*_temp_locked",
								"compare_to": 0,
								"comparison": "=="
							}
						]
					},
					"if_action": {
						"type": "origins:if_else",
						"condition": {
							"type": "origins:fall_distance",
							"compare_to": 0,
							"comparison": ">"
						},
						"if_action": {
							"type": "origins:change_resource",
							"resource": "*:*_gliding",
							"change": 1
						},
						"else_action": {
							"type": "origins:change_resource",
							"resource": "*:*_temp_locked",
							"change": 1
						}
					}
				}
			]
		},
		"condition": {
			"type": "origins:and",
			"conditions": [
				{
					"type": "origins:resource",
					"resource": "*:*_rune_id",
					"compare_to": 0,
					"comparison": ">"
				},
				{
					"type": "origins:on_block",
					"inverted": true
				},
				{
					"type": "origins:resource",
					"resource": "*:*_glide_duration",
					"compare_to": 0,
					"comparison": ">"
				},
				{
					"type": "origins:resource",
					"resource": "*:back_runes_fox_body",
					"compare_to": 0,
					"comparison": "=="
				},
				{
					"type": "origins:submerged_in",
					"fluid": "minecraft:water",
					"inverted": true
				},
				{
					"type": "origins:submerged_in",
					"fluid": "minecraft:lava",
					"inverted": true
				}
			]
		}
	},

	"slow_fall_glide": {
		"type": "origins:modify_falling",
		"velocity": 0.001,
		"take_fall_damage": false,
		"condition": {
			"type": "origins:and",
			"conditions": [
				{
					"type": "origins:resource",
					"resource": "*:*_rune_id",
					"compare_to": 1,
					"comparison": "=="
				},
				{
					"type": "origins:resource",
					"resource": "*:*_gliding",
					"compare_to": 1,
					"comparison": "=="
				}
			]
		}
	},

	"slow_fall_uplift": {
		"type": "origins:modify_falling",
		"velocity": 0.005,
		"take_fall_damage": false,
		"condition": {
			"type": "origins:and",
			"conditions": [
				{
					"type": "origins:resource",
					"resource": "*:*_rune_id",
					"compare_to": 2,
					"comparison": "=="
				},
				{
					"type": "origins:resource",
					"resource": "*:*_gliding",
					"compare_to": 1,
					"comparison": "=="
				}
			]
		}
	},

	"uplifted": {
		"type": "origins:resource",
		"min": 0,
		"max": 1,
		"max_action": {
			"type": "origins:add_velocity",
			"set": true,
			"y": 1
		}
	},

	"uplift_via_speak": {
		"type": "origins:active_self",
		"key": "key.use",
		"cooldown": 10,
		"entity_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:play_sound",
					"sound": "minecraft:entity.fox.sniff",
					"pitch": 1,
					"volume": 1,
					"category": "players"
				},
				{
					"type": "origins:change_resource",
					"resource": "*:*_uplifted",
					"change": 1
				}
			]
		},
		"condition": {
			"type": "origins:and",
			"conditions": [
				{
					"type": "origins:resource",
					"resource": "*:*_gliding",
					"compare_to": 1,
					"comparison": "=="
				},
				{
					"type": "origins:resource",
					"resource": "*:*_rune_id",
					"compare_to": 2,
					"comparison": "=="
				}
			]
		}
	},

	"faster_air_speed": {
		"type": "origins:modify_air_speed",
		"modifier": {
			"operation": "multiply_total",
			"value": 0.8
		},
		"condition": {
			"type": "origins:and",
			"conditions": [
				{
					"type": "origins:resource",
					"resource": "*:*_glide_duration",
					"compare_to": 220,
					"comparison": "<="
				},
				{
					"type": "origins:resource",
					"resource": "*:*_gliding",
					"compare_to": 1,
					"comparison": "=="
				}
			]
		}
	},

	"on_ground_reset": {
		"type": "origins:action_on_land",
		"entity_action": {
			"type": "origins:and",
			"actions": [
				{
					"type": "origins:change_resource",
					"resource": "*:*_glide_duration",
					"change": 240
				},
				{
					"type": "origins:change_resource",
					"resource": "*:*_temp_locked",
					"change": -1
				},
				{
					"type": "origins:change_resource",
					"resource": "*:*_uplifted",
					"change": -1
				}
			]
		}
	}
}
